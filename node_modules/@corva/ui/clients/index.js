import t from"@babel/runtime/helpers/defineProperty";import{noop as r}from"lodash";import*as e from"./clientStorage/index.js";export{e as clientStorage};import{get as n,put as o,patch as i,post as c,del as p}from"./api/apiCore.js";import{CORVA_API_URLS as u}from"./constants.js";import*as s from"./jsonApi/index.js";export{s as jsonApi};import*as a from"./subscriptions.js";export{a as subscriptions};import{v4 as f}from"uuid";function l(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function b(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){t(r,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))}))}return r}var m={get:function(t,r){return n(t,r)},put:function(t,r,e){return o(t,r,e)},patch:function(t,r,e){return i(t,r,e)},post:function(t,r){return c(t,r)},del:function(t,r){return p(t,r)}},d={get:function(t,r){return n(t,r,{apiUrl:u.DATA_API})},put:function(t,r,e){return o(t,r,e,{apiUrl:u.DATA_API})},patch:function(t,r,e){return i(t,r,e,{apiUrl:u.DATA_API})},post:function(t,r){return c(t,r,{apiUrl:u.DATA_API})},del:function(t,r){return p(t,r,{apiUrl:u.DATA_API})}},j={subscribe:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.onDataReceive,o=void 0===n?r:n;if(!window[Symbol.for("socket")])throw"Socket client is not initialized";var i=window[Symbol.for("socket")],c=i.subscribe,p=i.unsubscribe,u=i.socket,s=f(),a=b(b({},t),{},{collection:t.collection||t.dataset,appInstanceId:s});return c(a),u.on("data",(function(t){return t.appInstanceId===s&&o(t)})),function(){return p(a)}}};export{m as corvaAPI,d as corvaDataAPI,j as socketClient};
