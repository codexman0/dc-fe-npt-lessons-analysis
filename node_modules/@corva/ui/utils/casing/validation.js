import e from"@babel/runtime/helpers/defineProperty";import t from"moment";import{getUnitDisplay as r,getUnitPreference as n,convertValue as i}from"../convert.js";import{MIN_ID as o,MAX_ID as a,MIN_OD as h,MAX_OD as l,MIN_TOP_DEPTH as m,MAX_TOP_DEPTH as s,MIN_BOTTOM_DEPTH as u,MAX_BOTTOM_DEPTH as _,DP_MIN_ID as d,DP_MIN_OD as g,DP_MAX_ID as p,DP_MAX_OD as f,DP_MIN_TJ_ID as c,DP_MIN_TJ_OD as b,DP_MAX_TJ_ID as j,DP_MAX_TJ_OD as O,DP_MIN_LENGTH as F,DP_MAX_LENGTH as w,HWDP_MIN_ID as y,HWDP_MIN_OD as L,HWDP_MAX_ID as v,HWDP_MAX_OD as D,HWDP_MIN_TJ_ID as I,HWDP_MIN_TJ_OD as N,HWDP_MAX_TJ_ID as P,HWDP_MAX_TJ_OD as V,HWDP_MIN_LENGTH as q,HWDP_MAX_LENGTH as k}from"../../constants/casing.js";function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?x(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var S=r("shortLength"),T=r("length");function E(e,t,r,n){var i=r?e.toFixed(r):e,o=r?t.toFixed(r):t;return"".concat(i,"~").concat(o).concat(n?" (".concat(n,")"):"")}function J(e,t,r){return!(Number.isFinite(e)&&Number.isFinite(t)&&Number.isFinite(r))||(e<t||e>r)}function B(e,t){var r=n("shortLength"),o="in"!==r?i(e,"shortLength",r,"in"):e,a="in"!==r?i(t,"shortLength",r,"in"):t,h=2.673*(o*o-a*a);return"in"!==r?i(h,"massPerLength","lb-ft"):h}function C(e,t,r){var n=B(e,t);return r>=.5*n&&r<=1.5*n}function W(e){var t=function(e){return A(A({},e),{},{inner_diameter:parseFloat(e.inner_diameter),outer_diameter:parseFloat(e.outer_diameter),linear_weight:parseFloat(e.linear_weight),number_of_joints:parseFloat(e.number_of_joints),component_length:parseFloat(e.component_length),length:parseFloat(e.length),weight:parseFloat(e.weight),outer_diameter_tooljoint:parseFloat(e.outer_diameter_tooljoint),inner_diameter_tooljoint:parseFloat(e.inner_diameter_tooljoint),length_tooljoint:parseFloat(e.length_tooljoint)})}(e),r=A(A({},function(e){var t={};return Number.isFinite(e.inner_diameter)||(t.inner_diameter="It must be a number."),Number.isFinite(e.outer_diameter)||(t.outer_diameter="It must be a number."),Number.isFinite(e.linear_weight)||(t.linear_weight="It must be a number."),t.inner_diameter||t.outer_diameter||(e.outer_diameter<e.inner_diameter?t.outer_diameter="O.D > I.D":t.linear_weight||C(e.outer_diameter,e.inner_diameter,e.linear_weight)||(t.linear_weight="Invalid linear weight")),Number.isFinite(e.number_of_joints)||(t.number_of_joints="It must be a number."),Number.isFinite(e.component_length)||(t.component_length="It must be a number."),Number.isFinite(e.length)||(t.length="It must be a number."),Number.isFinite(e.weight)||(t.weight="It must be a number."),t}(t)),function(e){var t,r,n,o,a,h,l,m,s,u,_=e.family,x={};return"dp"!==_&&"hwdp"!==_||("dp"===_?(t=d,r=g,n=p,o=f,a=c,h=b,l=j,m=O,s=F,u=w):(t=y,r=L,n=v,o=D,a=I,h=N,l=P,m=V,s=q,u=k),t=i(t,"shortLength","in"),r=i(r,"shortLength","in"),n=i(n,"shortLength","in"),o=i(o,"shortLength","in"),a=i(a,"shortLength","in"),h=i(h,"shortLength","in"),l=i(l,"shortLength","in"),m=i(m,"shortLength","in"),s=i(s,"length","ft"),u=i(u,"length","ft"),J(e.inner_diameter,t,n)&&(x.inner_diameter=E(t,n,2,S)),J(e.outer_diameter,r,o)&&(x.outer_diameter=E(r,o,2,S)),J(e.inner_diameter_tooljoint,a,l)&&(x.inner_diameter_tooljoint=E(a,l,2,S)),J(e.outer_diameter_tooljoint,h,m)&&(x.outer_diameter_tooljoint=E(h,m,2,S)),J(e.length,s,u)&&(x.length=E(s,u,2,T)),!x.outer_diameter_tooljoint&&e.outer_diameter_tooljoint<e.outer_diameter&&(x.outer_diameter_tooljoint="Tool Joint O.D >= O.D"),e.length_tooljoint>e.component_length&&(x.length_tooljoint="Tool Joint Length < Component Length")),x}(t));return Object.keys(r).length>0?{isValid:!1,errors:r}:{isValid:!0}}function z(e,t){var r=[];if(t.length&&!e){var n=t.filter((function(e){return"casing_joints"===e.family})),i=t.filter((function(e){return"float_shoe"===e.family})),o=t[t.length-1],a=t[0];n.length<1&&r.push("At least one casing joints required."),0===i.length?r.push("At least one float shoe required."):i.length>1?r.push("Only one float shoe required."):"float_shoe"!==a.family&&"float_shoe"!==o.family&&r.push("Float Shoe should be on the bottom of the list")}if(e){var h=t.filter((function(e){return"riser"===e.family}));0===h.length?r.push("At least one riser required."):h.length>1&&r.push("Only one riser required.")}return r.length>0?{isValid:!1,errors:r}:{isValid:!0}}function G(e){var r=e.data,n={},d=i(o,"shortLength","in"),g=i(a,"shortLength","in"),p=i(h,"shortLength","in"),f=i(l,"shortLength","in"),c=i(m,"length","ft"),b=i(s,"length","ft"),j=i(u,"length","ft"),O=i(_,"length","ft");return r.start_timestamp&&!t(new Date(r.start_timestamp)).isValid()&&(n.start_timestamp="Invalid Date."),J(r.inner_diameter,d,g)&&(n.inner_diameter=E(d,g,2,S)),J(r.outer_diameter,p,f)&&(n.outer_diameter=E(p,f,2,S)),!n.inner_diameter&&!n.outer_diamter&&r.inner_diamter>r.outer_diameter&&(n.outer_diameter="O.D > I.D"),J(r.top_depth,c,b)&&(n.top_depth=E(c,b,2,T)),J(r.bottom_depth,j,O)&&(n.bottom_depth=E(j,O,2,T)),!n.top_depth&&!n.bottom_depth&&r.top_depth>r.bottom_depth&&(n.bottom_depth="Bottom Depth > Top Depth"),n.inner_diameter||n.outer_diameter||!C(r.outer_diameter,r.inner_diameter,r.linear_weight)||(n.linear_weight="Invalid Linear Weight"),Object.keys(n).length>0?{isValid:!1,errors:n}:{isValid:!0}}export{B as calculateLinearWeight,C as isValidLinearWeight,W as validateComponent,z as validateInterComponents,G as validateMainFields};
