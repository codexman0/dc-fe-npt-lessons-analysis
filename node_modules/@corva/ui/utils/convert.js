import r from"@babel/runtime/helpers/defineProperty";import t from"corva-convert-units";import{sortBy as n,uniqBy as e}from"lodash";import{UNIT_DEFINITIONS as o,IMPERIAL_UNITS as i,METRIC_UNITS as u}from"./constants/units.js";function c(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.push.apply(n,e)}return n}function f(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?c(Object(e),!0).forEach((function(n){r(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}var l="custom",a="imperial",s={imperial:i,metric:u,custom:{}},p=a,v=function(){return o},m=function(){return s[p]},b=function(r){var t=r.userUnits,n=r.companyUnits;if(!t&&!n)return s.custom={},void(p=a);s.custom=f(f(f({},i),n),t),p=l},d=function(r){return s[p][r]},g=function(r){var e=o.find((function(t){return t.type===r}));return e?n(t().list(e.origin),"abbr"):[]},h=function(r){var t=g(r);return e(t,"abbr")},y=function(){return p},O=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=t(),o=e.getUnit,i=e.describe;return null===n&&(n=s.custom[r]),o(n)?i(n).display:n},j=function(r){return s.imperial[r]},P=function(r,n,e){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;if(!r||!e||e===o)return r;if(null===o&&(!(o=d(n))||e===o))return r;var u=t(r).from(e).to(o);return Number.isFinite(u)?Math.round(u*Math.pow(10,i))/Math.pow(10,i):u},w=function(r,t,n,e){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return r.map((function(r){var u=P(r.get(t),n,e,o,i);return r.set(t,u)}))},D=function(r,t){return r.map((function(r){return t.reduce((function(r,t){var n=t.key,e=t.unitType,o=t.from,i=t.to,u=t.precision,c=r.get(n),f=P(c,e,o,i,u);return r.set(n,f)}),r)}))},M=function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,e=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,u=0;u<r.length;u+=1)r[u][t]=P(r[u][t],n,e,o,i);return r},U=function(r){return t().describe(d(r)).singular},k=function(r){return t().describe(d(r)).plural},E=function(r){return t().describe(r)};export{M as convertArray,w as convertImmutables,D as convertImmutablesByBatch,P as convertValue,v as getAllUnitTypes,j as getDefaultImperialUnit,m as getDefaultUnits,h as getUniqueUnitsByType,E as getUnitDescription,O as getUnitDisplay,k as getUnitPlural,d as getUnitPreference,U as getUnitSingular,y as getUnitSystem,g as getUnitsByType,b as updateUserUnits};
