import t from"@babel/runtime/helpers/defineProperty";import{get as r}from"lodash";import n from"@babel/runtime/helpers/slicedToArray";import e from"@babel/runtime/regenerator";import i from"@babel/runtime/helpers/asyncToGenerator";import{BENCHMARK_METRIC_GOAL as o}from"../../../constants/goals.js";import"../../../constants/apps.js";import"../../../constants/completion.js";import"../../../constants/segment.js";import{getCompanyGoalSetting as u}from"../../../utils/goals.js";import"../../../constants/alerts.js";import{mapbox as c}from"../../../utils/index.js";import{useState as s,useEffect as a,useRef as f}from"react";import"../../../constants/drillstring.js";import{FILTERS as l,METRICS_KEYS as p}from"../constants.js";import{fetchCompanies as m,fetchCompanyGoals as h,fetchWells as d,fetchMetricsData as v}from"../utils/apiCalls.js";export{default as useBidirectionalFiltering}from"./biDirectionalFiltering.js";function b(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,e)}return n}function y(r){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?b(Object(e),!0).forEach((function(n){t(r,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):b(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var j=c.getAssetV2Coordinates,g=c.getDistanceByCoordinates;function O(t){var r=f();return a((function(){r.current=t})),r.current}function w(t){var r=s([]),o=n(r,2),u=o[0],c=o[1];return a((function(){function r(){return(r=i(e.mark((function r(){var n;return e.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=3;break}return c([]),r.abrupt("return");case 3:return r.next=5,m();case 5:n=r.sent,c(n);case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}!function(){r.apply(this,arguments)}()}),[]),u}function x(t){var r=s(null),c=n(r,2),f=c[0],l=c[1];return a((function(){function r(){return(r=i(e.mark((function r(){var n,i;return e.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h(t);case 2:n=r.sent,i=u(n,o),l(i);case 5:case"end":return r.stop()}}),r)})))).apply(this,arguments)}l(null),function(){r.apply(this,arguments)}()}),[t]),f}function E(t,r){var o=s(null),u=n(o,2),c=u[0],f=u[1];return a((function(){function n(){return(n=i(e.mark((function n(){var i;return e.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d(t,r);case 2:i=n.sent,f(i);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}f(null),function(){n.apply(this,arguments)}()}),[t]),c}function P(t,r){var e=s(null),i=n(e,2),o=i[0],u=i[1];return a((function(){u(r?Object.values(l).reduce((function(r,n){return r.filter((function(r){return!t[n]||0===t[n].length||t[n].includes(r[n])}))}),r):null)}),[r,t]),o}function k(t,r){var e=s(null),i=n(e,2),o=i[0],u=i[1];return a((function(){if(t){var n=r&&j(r,"topHole");if(n){var e=[];t.forEach((function(t){var r=j(t,"topHole");if(r){var i=parseFloat(g(n,r));e.push(y(y({},t),{},{distance:i}))}else e.push(t)})),u(e)}else u(t)}else u(t)}),[t,r]),o}function D(t,r,e,i,o){var u=s(null),c=n(u,2),f=c[0],l=c[1];return a((function(){if(r&&e){var n=[];e.forEach((function(r){!o.includes(r.id)&&!i.includes(r.id)&&r.distance<=t&&n.push(r)})),r.forEach((function(t){i.includes(t.id)&&n.push(t)})),l(n.filter((function(t){return t.is_usable})))}else l(null)}),[t,r,e,i,o]),f}function F(t,o){var u=f({}),c=s(!0),l=n(c,2),m=l[0],h=l[1],d=s(null),b=n(d,2),j=b[0],g=b[1];return a((function(){function n(){return(n=i(e.mark((function n(i){var c,s,a;return e.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v(t,i);case 2:c=n.sent,s={},i.forEach((function(t){var n={},e=c.filter((function(n){return r(n,"asset_id")===t}));p.forEach((function(t){var i=e.find((function(n){return r(n,"data.key")===t})),o=r(i,"data.value");n[t]=Number.isFinite(o)?parseFloat(o).toFixed(2):null})),s[t]=n})),u.current=y(y({},u.current),s),a=[],o.forEach((function(t){a.push(y(y({},t),u.current[t.id]))})),h(!1),g(a);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}if(o)if(0!==o.length){var c=[];o.forEach((function(t){u.current[t.id]||c.push(t.id)})),h(!0),function(t){n.apply(this,arguments)}(c)}else g([]);else g(null)}),[o]),[m,j]}export{w as useCompanies,x as useCompanyMetricKey,P as useFilteredWells,F as useMetricsData,D as useOffsetWells,O as usePrevious,E as useWells,k as useWellsWithCoords};
