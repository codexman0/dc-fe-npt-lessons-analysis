import r from"@babel/runtime/helpers/defineProperty";import{get as e,uniq as t,set as n}from"lodash";import a from"@babel/runtime/helpers/slicedToArray";import u from"@babel/runtime/regenerator";import i from"@babel/runtime/helpers/asyncToGenerator";import"../../../../constants/goals.js";import"../../../../constants/apps.js";import"../../../../constants/completion.js";import"../../../../constants/segment.js";import"../../../../constants/alerts.js";import{getWells as s,getRigs as c,getResolvedAssets as o,getFracFleets as p,getFracFleetWells as l}from"../../../../clients/jsonApi/index.js";import{DEV_CENTER_CLI_APP_ID as f}from"../../../../constants/devcenter.js";import"../../../../constants/drillstring.js";function d(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var b=function(r,t){return r.toJS?r.getIn(t):e(r,t)},h=function(r){return b(r,["package"])},v=function(r,e){return+b(r,["settings",e])},w=function(r){return t(r.map((function(r){var e=a(r,2);e[0];return e[1]})).filter(Number.isFinite))};function y(r){return g.apply(this,arguments)}function g(){return(g=i(u.mark((function r(e){return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.length){r.next=2;break}return r.abrupt("return",null);case 2:return r.prev=2,r.next=5,s({ids:e,fields:["well.name","well.settings","well.company","well.asset_id","well.last_active_at","well.id","well.rig","rig.name","rig.asset_id","company.id"]});case 5:return r.abrupt("return",r.sent);case 8:return r.prev=8,r.t0=r.catch(2),console.error(r.t0),r.abrupt("return",null);case 12:case"end":return r.stop()}}),r,null,[[2,8]])})))).apply(this,arguments)}function _(r){return j.apply(this,arguments)}function j(){return(j=i(u.mark((function r(e){return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.length){r.next=2;break}return r.abrupt("return",null);case 2:return r.prev=2,r.next=5,c({ids:e,fields:["rig.name","rig.settings","rig.asset_id","rig.active_well","well.name","well.settings","well.company","well.asset_id","well.last_active_at","well.id","well.company.id"]});case 5:return r.abrupt("return",r.sent);case 8:return r.prev=8,r.t0=r.catch(2),console.error(r.t0),r.abrupt("return",null);case 12:case"end":return r.stop()}}),r,null,[[2,8]])})))).apply(this,arguments)}function x(r){return O.apply(this,arguments)}function O(){return(O=i(u.mark((function r(e){return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.length){r.next=2;break}return r.abrupt("return",null);case 2:return r.prev=2,r.next=5,o({assets:e});case 5:return r.abrupt("return",r.sent);case 8:return r.prev=8,r.t0=r.catch(2),console.error(r.t0),r.abrupt("return",null);case 12:case"end":return r.stop()}}),r,null,[[2,8]])})))).apply(this,arguments)}var k=function(r,t){return{well:r&&m(m({},r.attributes),{},{id:r.id,companyId:e(r,"relationships.company.data.id")}),rig:{name:e(t,"attributes.name"),id:e(t,"id"),asset_id:e(t,"attributes.asset_id")}}},P=function(r,t,n){return t?r.reduce((function(r,u){var i=a(u,2),s=i[0],c=i[1],o=n(t,c),p=t[e(o,"relationships.rig.data.id")];return r[s]=k(o,p),r}),{}):{}},D=function(r,t,n){return t?r.reduce((function(r,u){var i=a(u,2),s=i[0],c=i[1],o=n(t,c),p=t[e(o,"relationships.active_well.data.id")];return r[s]=k(p,o),r}),{}):{}},S=function(r,e,t){return e||t?r.reduce((function(r,n){var u=a(n,2),i=u[0],s=u[1],c=null==e?void 0:e[s],o=null==t?void 0:t[i];return r[i]={fracFleet:c,wells:o},r}),{}):{}};function A(r){return E.apply(this,arguments)}function E(){return(E=i(u.mark((function r(e){return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return",null);case 2:return r.prev=2,r.next=5,p({ids:e,fields:["frac_fleet.name","frac_fleet.pads","frac_fleet.current_pad_id","frac_fleet.pad_frac_fleets"]});case 5:return r.abrupt("return",r.sent);case 8:return r.prev=8,r.t0=r.catch(2),console.error(r.t0),r.abrupt("return",null);case 12:case"end":return r.stop()}}),r,null,[[2,8]])})))).apply(this,arguments)}function F(r,e){return I.apply(this,arguments)}function I(){return(I=i(u.mark((function r(t,s){var c,o;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c=t.map(function(){var r=i(u.mark((function r(e){var t,n,i,c,o;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=a(e,2),n=t[0],i=t[1],c={fields:"all",frac_fleet_id:i},o=s.find((function(r){return b(r,["id"])===n})),n===f?c.app_key=b(o,["app","app_key"]):c.app_id=b(o,["app","id"]),r.next=6,l(c);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()),r.next=4,Promise.all(c);case 4:return o=r.sent,r.abrupt("return",o.reduce((function(r,a,u){var i=a.data,s=a.included,c=i.map((function(r){return n(r,"relationships.app_streams.data",e(r,"relationships.app_streams.data").map((function(r){return s.find((function(e){return e.id===r.id}))})))}));return r[t[u][0]]=c,r}),{}));case 8:return r.prev=8,r.t0=r.catch(0),console.error(r.t0),r.abrupt("return",null);case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))).apply(this,arguments)}export{b as appFieldGetter,x as fetchAssetEntitiesByAssetIds,F as fetchFracFleetWells,A as fetchFracFleets,_ as fetchRigs,y as fetchWells,v as getAppAssetSpecificTypeId,S as getAppsDataByFFs,D as getAppsDataByRigs,P as getAppsDataByWells,w as getUniqAssetIds,h as isDevCenterApp};
