import{get as t,keyBy as r,values as n,merge as e,flatten as a,uniq as u}from"lodash";import i from"@babel/runtime/helpers/slicedToArray";import c from"@babel/runtime/regenerator";import o from"@babel/runtime/helpers/asyncToGenerator";import s from"@babel/runtime/helpers/toConsumableArray";import{ASSET_TYPES as p}from"../../../../constants/assetTypes.js";import{getAppsDataByRigs as d,fetchRigs as f,getAppsDataByWells as l,fetchWells as m,fetchAssetEntitiesByAssetIds as b,getAppsDataByFFs as y,getUniqAssetIds as x,fetchFracFleets as h,fetchFracFleetWells as k}from"./utils.js";function v(t,r){return w.apply(this,arguments)}function w(){return(w=o(c.mark((function e(a,u){var i,o,s,y,x,h,k,v,w,g;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b([a]);case 2:if(i=e.sent,o=t(n(i),"[0][0].data")){e.next=6;break}return e.abrupt("return",{});case 6:if(o.type!==p.well.type){e.next=16;break}return e.next=9,m([o.id]);case 9:if(s=e.sent){e.next=12;break}return e.abrupt("return",{});case 12:return y=t(s,"data"),x=y&&r(y.concat(s.included),"id"),h=l(u,x,(function(r){return r[t(s,"data[0].id")]})),e.abrupt("return",h);case 16:if(o.type!==p.rig.type){e.next=24;break}if(k=f([o.id])){e.next=20;break}return e.abrupt("return",null);case 20:return v=t(k,"data"),w=v&&r(v.concat(k.included),"id"),g=d(u,w,(function(r){return r[t(k,"data[0].id")]})),e.abrupt("return",g);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(t,r,n,e){return T.apply(this,arguments)}function T(){return(T=o(c.mark((function n(a,u,o,p){var b,v,w,g,T,j,A,P,C,G,S,_,q,z,B,D,E,F,H;return c.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return b=x(a),v=x(u),w=x(o),g=s(new Set(o)),n.next=6,Promise.all([m(b),f(v),h(w),k(g,p)]);case 6:if(T=n.sent,j=i(T,4),A=j[0],P=j[1],C=j[2],G=j[3],A||P||C||G){n.next=14;break}return n.abrupt("return",{});case 14:return S=t(A,"data"),_=t(P,"data"),q=t(C,"data"),z=S&&r(S.concat(A.included),"id"),B=_&&r(_.concat(P.included),"id"),D=q&&r(q.concat(C.included),"id"),E=l(a,z,(function(t,r){return t[r]})),F=d(u,B,(function(t,r){return t[r]})),H=y(o,D,G),n.abrupt("return",e(E,F,H));case 24:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function j(t,r,n){return A.apply(this,arguments)}function A(){return(A=o(c.mark((function o(s,y,h){var k,v,w,g,T,j,A,P,C,G,S,_,q,z,B,D;return c.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return k=x(s),c.next=3,b(k);case 3:return v=c.sent,w=a(n(v)),g=u(w.filter((function(r){return t(r,"data.type")===p.well.type})).map((function(r){return+t(r,"data.id")})).concat(y.map((function(t){var r=i(t,2);r[0];return r[1]})))),T=u(w.filter((function(r){return t(r,"data.type")===p.rig.type})).map((function(r){return+t(r,"data.id")})).concat(h.map((function(t){var r=i(t,2);r[0];return r[1]})))),c.next=9,Promise.all([m(g),f(T)]);case 9:if(j=c.sent,A=i(j,2),P=A[0],C=A[1],P||C){c.next=15;break}return c.abrupt("return",{});case 15:return G=t(P,"data"),S=t(C,"data"),_=G&&r(G.concat(P.included),"id"),q=S&&r(S.concat(C.included),"id"),z=s.map((function(r){var n=i(r,2),e=n[0],a=n[1];return[e,G.concat(S).find((function(r){return t(r,"attributes.asset_id")===a})).id]})).concat(y,h),B=l(z,_,(function(t,r){return t[r]})),D=d(z,q,(function(t,r){return t[r]})),c.abrupt("return",e(B,D));case 23:case"end":return c.stop()}}),o)})))).apply(this,arguments)}export{v as resolveAppsDataForAssetDashboard,j as resolveAppsDataForFeedPage,g as resolveAppsDataForGeneralDashboard};
