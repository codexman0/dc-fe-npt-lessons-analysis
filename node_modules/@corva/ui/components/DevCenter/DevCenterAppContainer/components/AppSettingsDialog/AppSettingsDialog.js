import t from"@babel/runtime/helpers/defineProperty";import{cloneDeep as e,get as i}from"lodash";import r from"@babel/runtime/helpers/slicedToArray";import"@babel/runtime/regenerator";import"@babel/runtime/helpers/asyncToGenerator";import"@babel/runtime/helpers/toConsumableArray";import"../../../../../constants/goals.js";import"../../../../../constants/apps.js";import"../../../../../constants/completion.js";import{SEGMENT_TO_ASSET_TYPE as o}from"../../../../../constants/segment.js";import"../../../../../utils/intercom.js";import"../../../../../constants/alerts.js";import"../../../../../utils/mobileDetect.js";import{jsxs as n,jsx as s,Fragment as p}from"react/jsx-runtime";import{withStyles as a,Dialog as m,Tabs as l,DialogTitle as c,Divider as d,DialogContent as u,Tab as j,DialogActions as g,Button as A}from"@material-ui/core";import"@babel/runtime/helpers/typeof";import{useState as b}from"react";import"querystring";import"uuid/v1";import"../../../../../clients/jsonApi/index.js";import"../../../../../clients/subscriptions.js";import{func as S,shape as f,string as h,bool as y}from"prop-types";import"classnames";import"@material-ui/icons";import"../../../../Modal/index.js";import"../../../../IconMenu/index.js";import"../../../../StyledMenuItem/index.js";import"../../../../StyledTooltip/MediumTooltip.js";import"../../../../ErrorBoundary/InternalErrorView/InternalErrorView.js";import C from"../../../../ErrorBoundary/ErrorBoundary.js";import"../../../../Typography.js";import"../../../../LoadingIndicator/LoadingIndicator.js";import"react-router";import"../../../../Avatar/index.js";import"../../../../Annotations/AnnotationsContext.js";import x from"../../../../ConfirmationDialog.js";import"../../../../Annotations/components/AnnotationsList/index.js";import"../../../../Annotations/components/LastAnnotation/index.js";import"../../../../PadModeSelect/PadModeSelect.js";import"../../../AppHeader/AppHeader.js";import E from"../../../../ErrorBoundary/DevCenterAppErrorView/DevCenterAppErrorView.js";import{DEV_CENTER_CLI_APP_ID as v}from"../../../../../constants/devcenter.js";import"../../../../../constants/drillstring.js";import"../AppActions/AppActions.css.js";import P from"./RemoveAppButton.js";import"../../../../SlateFormattedText/RenderElements.js";import"../../../../SlateFormattedText/SlateFormattedText.js";import T from"./AppDetails.js";import"../AnnotationsButton/AnnotationsButton.js";import"../NonPriorityMenus/NonPriorityMenus.js";import"../FullscreenButton/FullscreenButton.css.js";import"../../../AppContext.js";import"../../DevCenterAppContainer.css.js";import"../RestoreAppSizeButton/index.js";import"../PriorityMenus/PriorityMenus.css.js";import"../../../NavigationBar/NavigationBar.js";import"../../../SideBar/SideBar.js";import"../../../../TruncatedText/index.js";import"../../../../AssetEditor/SingleAssetEditor.js";import"../../../../AssetEditor/SingleAssetEditorAutocomplete.js";import D from"../../../../AssetEditor/index.js";import k from"../../../../AppVersionsSelect/AppVersionsSelect.js";import"../../../../CollapsableSidebar.js";import"../../../../DateTimePicker/index.js";import"../../../../DatePicker/index.js";import"uuid";import"../../../../ColorPicker/ColorPicker.js";import"../../../../ParameterCharts/AddEditTrack.js";import"../../../../ParameterCharts/ParameterCharts.js";import"../../../../ChartActionsList/ChartActionsList.js";import"../../../../SettingEditors/ColorEditor/index.js";import"../../../../SettingEditors/DropdownEditor/index.js";import"../../../../SettingEditors/RadioEditor/index.js";import"../../../../SwitchControl/index.js";import"../../../../RangeSlider/RangeSlider.js";import"../../../../Login/components/Login.js";import"../../../../Login/components/PasswordField.js";import"../../../../Login/components/Chip.js";import"../../../../Login/components/StepFooter.js";import"../../../../Login/components/StepContent.js";import"../../../../Login/components/StepHeader.js";import"../../../../Login/components/Step.js";import"../../../../Login/components/OrDivider.js";import"../../../../Login/components/HiddenEmailField.js";import"../../../../Login/components/EmailField.js";import"../../../../Breadcrumbs/index.js";import"../../../../VirtualizedTable/index.js";import"../../../../EmptyView/index.js";import"../../../../Button/index.js";import"../../../../MenuItem/index.js";import"../../../../ContextMenuItem/index.js";import"../../../../FolderMenuItem/index.js";import"../../../../EditableItem/EditableItem/index.js";import"../../../../EditableItem/EditableItemWithBadge/index.js";import"../../../../Checkbox/index.js";import"../../../../FolderMenuItemWithLinks/index.js";import"../../../../IconButton/index.js";import"../../../../Chip/index.js";import"../../../../AnchorsList/AnchorsList.js";import"../../../../Select/index.js";import"../../../../Tabs/Tabs.js";import"../../../../Tabs/Tab.js";import"../../../../Drillstring/BHASchematic.js";import"../../../../Drillstring/BHAComponentIcon.js";import"../../../../Drillstring/BHATable/index.js";import"../../../../Drillstring/BHAComponentDetail/index.js";import"../../../../Casing/CasingComponentIcon.js";import"../../../../Casing/CasingTable/index.js";import"../../../../WellSummary/WellSummaryItemLabel.js";import"../../../../WellSummary/WellSummaryItemValue.js";import"../../../../WellSummary/ActivitySummaryChart.js";import"../../../../OffsetWellPickerV2/OffsetWellPickerDialog.js";import"../../../../Notifications/Notifications.js";import"../../../../TextLink/index.js";import"../../../../Template/TemplatePopover/index.js";function B(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function I(e){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?B(Object(r),!0).forEach((function(i){t(e,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L="DC_appSettings",O=a({paper:{minWidth:"50rem",height:"40rem"}})(m),R=a({root:{marginBottom:10}})(l),w="SETTINGS",M="APP DETAILS",V="VIEW APP PAGE";function F(a){var m=a.toggleAppSettingsDialog,l=a.onSettingsChange,S=a.app,f=a.appData,h=a.onAppRemove,y=a.AppSettingsComponent,B=a.currentUser,F=a.layoutEnvironment,W=a.segment,q=a.isMultiRig,H=b(w),N=r(H,2),_=N[0],U=N[1],G=b((function(){return I(I({},e(S.settings)),{},{package:S.settings.package||S.package.version})})),z=r(G,2),Y=z[0],J=z[1],K=b(!0),Q=r(K,2),X=Q[0],Z=Q[1],$=S.id===v,tt=function(e,i){return J((function(r){return I(I({},r),{},t({},e,i))}))},et=function(t){return J((function(e){return I(I({},e),t)}))},it=!(q||F&&"general"!==F.type);return n(O,{open:!0,onBackdropClick:m,children:[n(c,{children:[S.package.manifest.application.name," settings"]}),s(d,{}),n(u,{children:[n(R,{value:_,onChange:function(t,e){return U(e)},indicatorColor:"primary",textColor:"primary",children:[s(j,{"data-testid":"".concat(L,"_settingsTab"),label:w,value:w}),s(j,{"data-testid":"".concat(L,"_appDetailsTab"),label:M,value:M}),s(j,{"data-testid":"".concat(L,"_viewAppPageTab"),label:V,value:V})]}),y&&n(C,{ErrorView:E,app:S,children:[s(x,{open:!X&&!Y.package,isShowCancel:!1,title:"Validation failed",text:"You should select the app version to proceed",handleOk:function(){return Z(!0)}}),_===w&&n(p,{children:[it&&s(D,{settings:Y,onSettingsChange:et,appType:o[W],isNullable:!1,label:"Active Asset"}),s(y,{app:S,appData:f,settings:Y,onSettingChange:tt,onSettingsChange:et,layoutEnvironment:F,currentUser:B}),!$&&s(k,{appId:S.app.id,value:Y.package,onChange:function(t){return tt("package",t)},currentUser:B})]}),_===M&&s(T,{appDescription:i(S,"app.description"),appSummary:i(S,"app.summary")})]})]}),n(g,{children:[h&&s(P,{app:S,onAppRemove:h}),s(A,{"data-testid":"".concat(L,"_cancel"),onClick:m,children:"Cancel"}),s(A,{"data-testid":"".concat(L,"_save"),variant:"contained",color:"primary",onClick:function(){Y.package||$?(l(Y),m()):Z(!1)},children:"Save"})]})]})}F.propTypes={toggleAppSettingsDialog:S.isRequired,onSettingsChange:S.isRequired,app:f({}).isRequired,appData:f({}).isRequired,onAppRemove:S.isRequired,AppSettingsComponent:S,currentUser:f({}).isRequired,layoutEnvironment:f({}).isRequired,segment:h.isRequired,isMultiRig:y.isRequired},F.defaultProps={AppSettingsComponent:null};export default F;
