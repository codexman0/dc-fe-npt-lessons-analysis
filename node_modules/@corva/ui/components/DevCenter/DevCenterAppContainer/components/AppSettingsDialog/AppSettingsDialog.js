import t from"@babel/runtime/helpers/defineProperty";import{cloneDeep as e,get as i}from"lodash";import r from"@babel/runtime/helpers/slicedToArray";import"@babel/runtime/regenerator";import"@babel/runtime/helpers/asyncToGenerator";import"@babel/runtime/helpers/toConsumableArray";import"../../../../../constants/goals.js";import"../../../../../constants/apps.js";import"../../../../../constants/completion.js";import{SEGMENT_TO_ASSET_TYPE as o}from"../../../../../constants/segment.js";import"../../../../../utils/intercom.js";import"../../../../../constants/alerts.js";import"../../../../../utils/mobileDetect.js";import{jsxs as n,jsx as s,Fragment as p}from"react/jsx-runtime";import{withStyles as a,Dialog as m,Tabs as l,DialogTitle as d,Divider as c,DialogContent as u,Tab as j,DialogActions as g}from"@material-ui/core";import"@babel/runtime/helpers/typeof";import{useState as A}from"react";import"querystring";import"uuid/v1";import"../../../../../clients/jsonApi/index.js";import"../../../../../clients/subscriptions.js";import"uuid";import{func as f,shape as b,string as y,bool as S}from"prop-types";import"classnames";import"../../../../Modal/index.js";import"../../../../IconMenu/index.js";import"../../../../StyledMenuItem/index.js";import"../../../../StyledTooltip/MediumTooltip.js";import"../../../../LoadingIndicator/LoadingIndicator.js";import"react-router";import"../../../../Avatar/index.js";import"../../../../Annotations/AnnotationsContext.js";import C from"../../../../ConfirmationDialog.js";import"../../../../Annotations/components/AnnotationsList/index.js";import"../../../../Annotations/components/LastAnnotation/index.js";import{DEV_CENTER_CLI_APP_ID as h}from"../../../../../constants/devcenter.js";import"../../../../../constants/drillstring.js";import"../AppActions/AppActions.css.js";import"../../../../ErrorBoundary/InternalErrorView/InternalErrorView.js";import x from"../../../../ErrorBoundary/ErrorBoundary.js";import"../../../../Typography.js";import"../../../../PadModeSelect/PadModeSelect.js";import"../../../AppHeader/AppHeader.js";import v from"../../../../ErrorBoundary/DevCenterAppErrorView/DevCenterAppErrorView.js";import E from"./RemoveAppButton.js";import"../../../../SlateFormattedText/RenderElements.js";import"../../../../SlateFormattedText/SlateFormattedText.js";import P from"./AppDetails.js";import"../AnnotationsButton/AnnotationsButton.js";import"../NonPriorityMenus/NonPriorityMenus.js";import"../FullscreenButton/FullscreenButton.js";import"../AppInfoMessage/AppInfoMessage.js";import"../../../AppContext.js";import"../../DevCenterAppContainer.css.js";import"../RestoreAppSizeButton/index.js";import"../PriorityMenus/PriorityMenus.css.js";import"../../../AppsDataProvider/AppsDataProvider.js";import"../../../NavigationBar/NavigationBar.js";import"../../../SideBar/SideBar.js";import"../../../../TruncatedText/index.js";import"../../../../AssetEditor/SingleAssetEditor.js";import"../../../../AssetEditor/AssetEditorAutocomplete.js";import D from"../../../../AssetEditor/index.js";import T from"../../../../AppVersionsSelect/AppVersionsSelect.js";import"../../../../CollapsableSidebar.js";import"../../../../DateTimePicker/index.js";import"../../../../DatePicker/index.js";import"../../../../ColorPicker/ColorPicker.js";import"../../../../ParameterCharts/AddEditTrack.js";import"../../../../ParameterCharts/ParameterCharts.js";import"../../../../ChartActionsList/ChartActionsList.js";import"../../../../SettingEditors/ColorEditor/index.js";import"../../../../SettingEditors/DropdownEditor/index.js";import"../../../../SettingEditors/RadioEditor/index.js";import"../../../../SwitchControl/index.js";import"../../../../RangeSlider/RangeSlider.js";import"../../../../Login/components/Login.js";import"../../../../Login/components/PasswordField.js";import"../../../../Login/components/Chip.js";import"../../../../Login/components/StepFooter.js";import"../../../../Login/components/StepContent.js";import"../../../../Login/components/StepHeader.js";import"../../../../Login/components/Step.js";import"../../../../Login/components/OrDivider.js";import"../../../../Login/components/HiddenEmailField.js";import"../../../../Login/components/EmailField.js";import"../../../../Breadcrumbs/index.js";import"../../../../VirtualizedTable/index.js";import"../../../../EmptyView/index.js";import I from"../../../../Button/index.js";import"../../../../MenuItem/index.js";import"../../../../ContextMenuItem/index.js";import"../../../../FolderMenuItem/index.js";import"../../../../EditableItem/EditableItem/index.js";import"../../../../EditableItem/EditableItemWithBadge/index.js";import"../../../../Checkbox/index.js";import"../../../../FolderMenuItemWithLinks/index.js";import"../../../../IconButton/index.js";import"../../../../Chip/index.js";import"../../../../AnchorsList/AnchorsList.js";import"../../../../Select/index.js";import"../../../../Tabs/Tabs.js";import"../../../../Tabs/Tab.js";import"../../../../Drillstring/BHASchematic.js";import"../../../../Drillstring/BHAComponentIcon.js";import"../../../../Drillstring/BHATable/index.js";import"../../../../Drillstring/BHAComponentDetail/index.js";import"../../../../Casing/CasingComponentIcon.js";import"../../../../Casing/CasingTable/index.js";import"../../../../WellSummary/WellSummaryItemLabel.js";import"../../../../WellSummary/WellSummaryItemTitle.js";import"../../../../WellSummary/WellSummaryItemValue.js";import"../../../../WellSummary/ActivitySummaryChart.js";import"../../../../OffsetWellPickerV2/OffsetWellPickerDialog.js";import"../../../../BICOffsetPickerDialog/index.js";import"../../../../Notifications/Notifications.js";import"../../../../TextLink/index.js";import"../../../../Template/TemplatePopover/index.js";import"../../../../PinnableFilters/PinnableFilters.js";import"../../../../HeaderLayout/HeaderLayout.js";function k(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function B(e){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?k(Object(r),!0).forEach((function(i){t(e,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L="DC_appSettings",O=a({paper:{minWidth:"50rem",height:"40rem"}})(m),R=a({root:{marginBottom:10}})(l),M="SETTINGS",w="APP DETAILS",F="VIEW APP PAGE";function V(a){var m=a.toggleAppSettingsDialog,l=a.onSettingsChange,f=a.app,b=a.appData,y=a.onAppRemove,S=a.AppSettingsComponent,k=a.currentUser,V=a.layoutEnvironment,W=a.segment,H=a.isMultiRig,q=A(M),N=r(q,2),_=N[0],U=N[1],G=A((function(){return B(B({},e(f.settings)),{},{package:f.settings.package||f.package.version})})),z=r(G,2),Y=z[0],J=z[1],K=A(!0),Q=r(K,2),X=Q[0],Z=Q[1],$=f.id===h,tt=function(e,i){return J((function(r){return B(B({},r),{},t({},e,i))}))},et=function(t){return J((function(e){return B(B({},e),t)}))},it=!(H||V&&"general"!==V.type);return n(O,{open:!0,onBackdropClick:m,children:[n(d,{children:[f.package.manifest.application.name," settings"]}),s(c,{}),n(u,{children:[n(R,{value:_,onChange:function(t,e){return U(e)},indicatorColor:"primary",textColor:"primary",children:[s(j,{"data-testid":"".concat(L,"_settingsTab"),label:M,value:M}),s(j,{"data-testid":"".concat(L,"_appDetailsTab"),label:w,value:w}),s(j,{"data-testid":"".concat(L,"_viewAppPageTab"),label:F,value:F})]}),S&&n(x,{ErrorView:v,app:f,children:[s(C,{open:!X&&!Y.package,isShowCancel:!1,title:"Validation failed",text:"You should select the app version to proceed",handleOk:function(){return Z(!0)}}),_===M&&n(p,{children:[it&&s(D,{settings:Y,onSettingsChange:et,appType:o[W],isNullable:!1,label:"Active Asset"}),s(S,{app:f,appData:b,settings:Y,onSettingChange:tt,onSettingsChange:et,layoutEnvironment:V,currentUser:k}),!$&&s(T,{appId:f.app.id,value:Y.package,onChange:function(t){return tt("package",t)},currentUser:k})]}),_===w&&s(P,{appDescription:i(f,"app.description"),appSummary:i(f,"app.summary")})]})]}),n(g,{children:[y&&s(E,{app:f,onAppRemove:y}),s(I,{"data-testid":"".concat(L,"_cancel"),variation:"secondary",onClick:m,children:"Cancel"}),s(I,{"data-testid":"".concat(L,"_save"),variation:"primary",onClick:function(){Y.package||$?(l(Y),m()):Z(!1)},children:"Save"})]})]})}V.propTypes={toggleAppSettingsDialog:f.isRequired,onSettingsChange:f.isRequired,app:b({}).isRequired,appData:b({}).isRequired,onAppRemove:f,AppSettingsComponent:f,currentUser:b({}).isRequired,layoutEnvironment:b({}).isRequired,segment:y.isRequired,isMultiRig:S.isRequired},V.defaultProps={AppSettingsComponent:null,onAppRemove:void 0};export default V;
