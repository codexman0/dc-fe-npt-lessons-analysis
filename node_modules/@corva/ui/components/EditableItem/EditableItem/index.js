import e from"@babel/runtime/helpers/defineProperty";import o from"@babel/runtime/helpers/slicedToArray";import{jsxs as i,jsx as t}from"react/jsx-runtime";import{withStyles as n,Tooltip as r,makeStyles as a,ClickAwayListener as l,TextField as c,InputAdornment as p}from"@material-ui/core";import s from"@material-ui/icons/Close";import{useState as d,useEffect as m}from"react";import u from"prop-types";import b from"classnames";import f from"@material-ui/icons/Edit";import g from"@material-ui/icons/Done";var h=n((function(e){return{tooltip:{margin:"8px 0 !important",fontSize:"0.6875rem",lineHeight:"1rem",padding:"4px 8px",backgroundColor:e.palette.background.b9,boxShadow:"0px 4px 4px rgb(0, 0, 0, 0.12)"}}}))(r),v=a((function(e){return{editableItem:{width:"100%",height:36,position:"relative",backgroundColor:e.palette.background.b8,"&:hover":{backgroundColor:"rgba(3, 188, 212, 0.07)"},"&:hover svg":{visibility:"visible"}},editableItemActive:{backgroundColor:"rgba(3, 188, 212, 0.15)  !important"},value:{color:e.palette.primary.text6,fontSize:"0.875rem",height:"100%",letterSpacing:".13132px",lineHeight:"36px",overflow:"hidden",paddingLeft:48,textOverflow:"ellipsis",whiteSpace:"nowrap",width:"calc(100% - 32px)",userSelect:"none"},textField:{width:"100%"},inputRoot:{height:36,paddingLeft:48,fontSize:"0.875rem"},inputDisabled:{backgroundColor:"unset",paddingRight:16,"&::before":{display:"none"},pointerEvents:"none"},icon:{boxSizing:"content-box",cursor:"pointer",color:e.palette.primary.text6,padding:7,fontSize:"1rem","&:hover":{color:"#FFFFFF",backgroundColor:"rgba(51, 51, 51, 0.9)",borderRadius:"50%"},"&:target":{backgroundColor:e.palette.background.b9}},iconPrimary:{color:e.palette.primary.main},iconPrimaryDisabled:{color:e.palette.primary.main,opacity:.4,cursor:"default",pointerEvents:"none"},iconClose:{fill:"".concat(e.palette.primary.text6," !important"),"&:hover":{fill:"#FFFFFF !important"}},iconEdit:{position:"absolute",right:4,top:3,visibility:"hidden"},inputAdornment:{marginTop:1,marginRight:4}}})),y=function(n){var r=n.className,a=n.isEditable,u=n.isEditing,y=n.onClick,k=n.onClickAway,C=n.onCancel,x=n.onSave,E=n.value,F=d(E),S=o(F,2),w=S[0],P=S[1],A=d(u),N=o(A,2),z=N[0],R=N[1],D=v(),I=function(e){e.stopPropagation(),w.length&&w!==E&&x(w).then((function(){return R(!1)}))};m((function(){var e=function(e){"Escape"===e.key||"Esc"===e.key?(P(E),R(!1),k()):"Enter"===e.key&&I(e)};return z&&document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[z,E,w]);var L=function(e){e.stopPropagation(),P(E),R(!1),C()};m((function(){P(E)}),[E]);var T=b(D.editableItem,e({},D.editableItemActive,z),r);return i("div",{className:T,onClick:y,children:[!z&&t("div",{className:D.value,children:w}),z&&t(l,{onClickAway:function(){P(E),R(!1),k()},children:t(c,{autoFocus:!0,type:"text",value:w,onChange:function(e){e.stopPropagation(),P(e.target.value)},placeholder:"Page Name...",className:D.textField,InputProps:{classes:{root:D.inputRoot},endAdornment:z?t(p,{position:"end",children:i("span",{className:D.inputAdornment,children:[t(h,{title:"Cancel",placement:"bottom-end",children:t(s,{className:b(D.icon,D.iconClose),onClick:L,fontSize:"small"})}),t(h,{title:"Save",placement:"bottom-end",children:t(g,{color:w===E?"disabled":"primary",onClick:I,fontSize:"small",disabled:w===E,classes:{root:D.icon,colorPrimary:D.iconPrimary,colorDisabled:D.iconPrimaryDisabled}})})]})}):null}})}),a&&!z&&t(h,{title:"Rename Page",placement:"bottom-end",children:t(f,{className:b(D.icon,D.iconEdit),onClick:function(e){e.stopPropagation(),R(!0)},fontSize:"small"})})]})};y.propTypes={className:u.string,isEditable:u.bool,isEditing:u.bool,onClick:u.func,onSave:u.func.isRequired,onClickAway:u.func,onCancel:u.func,value:u.string.isRequired},y.defaultProps={className:"",isEditable:!0,isEditing:!1,onClick:function(){},onClickAway:function(){},onCancel:function(){}};export default y;
