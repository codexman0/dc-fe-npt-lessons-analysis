import r from"@babel/runtime/regenerator";import e from"@babel/runtime/helpers/asyncToGenerator";import{jsx as t}from"react/jsx-runtime";import{getUserAutocomplete as n}from"../../../clients/jsonApi/index.js";import{Link as o}from"react-router";import a from"../../UserCardPopover.js";import{PLACEHOLDERS as i,USER_MARKUP as c}from"../constants.js";import s from"../style.css.js";var u,l=function(r){return r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},p=function(r){var e=l(r),t=r[r.indexOf(i.display)+i.display.length],n=r[r.indexOf(i.display)+i.display.length];return new RegExp(e.replace(i.display,"([^".concat(l(t||""),"]+?)")).replace(i.id,"([^".concat(l(n||""),"]+?)")),"g")},f=function(r,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#039be5",s=arguments.length>4?arguments[4]:void 0;if(!r)return r;var u=p(c),l=r.split(u),f=3,m=l.reduce((function(r,c,u){var p=r;if(u%f-1==0){var m="@".concat(l[u+1]),d=e&&e.length&&e.find((function(r){return r.id===Number(c)})),h=d&&!n?t(a,{user:d,wrapperStyle:{display:"inline-block",color:i},currentUser:s,children:m},"userCard-".concat(u)):t(o,{onClick:function(r){return r.preventDefault()},to:"/config/users/".concat(c),children:m},"userLink-".concat(u));p.push(h)}return u%f==0&&p.push(c),p}),[]);return m},m=function(r){return r.data.map((function(r){return{id:r.id,display:"".concat(r.first_name," ").concat(r.last_name),photo:r.profile_photo,title:r.title}}))},d=(u=e(r.mark((function e(t,o,a){var i,c;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return",o([]));case 2:return r.prev=2,r.next=5,n(null,t,a);case 5:i=r.sent,r.next=11;break;case 8:r.prev=8,r.t0=r.catch(2),console.error(r.t0);case 11:if(i&&0!==i.data.length){r.next=13;break}return r.abrupt("return",o([]));case 13:return c=m(i),r.abrupt("return",o(c));case 15:case"end":return r.stop()}}),e,null,[[2,8]])}))),function(r,e,t){return u.apply(this,arguments)}),h=function(){return document.getElementsByClassName(s.mention__suggestions__list).length>0};export{f as formatMentionText,d as handleFetchUsers,h as isSuggestionsListOpened};
