import{sumBy as t,upperFirst as i}from"lodash";import{jsxs as e,jsx as a}from"react/jsx-runtime";import{makeStyles as o,Typography as r}from"@material-ui/core";import{useRef as n,useMemo as d,useEffect as l}from"react";import c from"prop-types";var s=o({root:{width:"228px",height:"228px",borderRadius:"50%",border:"2px solid #3e3e3e",padding:"6px",position:"relative"},backgroundRoot:{width:"100%",height:"100%",borderRadius:"50%",border:"2px solid #5d666e",padding:"2px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},dropShadowRoot:{width:"100%",height:"100%",borderRadius:"50%",filter:"blur(36px)",border:"2px solid #64B5F6",display:"flex",alignItems:"center",justifyContent:"center"},content:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",left:0,top:0},lastActivityRoot:{width:"90px",height:"90px",background:"#3B3B3B",boxShadow:"0px 2px 2px rgba(0, 0, 0, 0.1), inset 0px 1px 1px rgba(255, 255, 255, 0.05)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"8px 0"},activityDuration:{fontSize:"24px"},durationUnit:{fontSize:"16px"},activityTimeRange:{fontSize:"10px",textTransform:"uppercase",color:"#9E9E9E",lineHeight:"24px",fontWeight:500},activityName:{fontSize:"12px",lineHeight:"14px",fontWeight:500},chart:{position:"absolute",left:0,top:0,width:"100%",height:"100%",padding:"12px"},canvas:{width:"100%",height:"100%"}});function h(t,i,e,a,o,r,n){t.beginPath(),t.moveTo(i,e),t.arc(i,e,a,o,r),t.closePath(),t.fillStyle=n,t.fill()}function p(o){var c=o.currentActivityName,p=o.activities,u=s(),f=n(null),m=d((function(){return t(p,"duration")}),[p]),x=d((function(){return p.find((function(t){return t.name===c}))}),[p,c]);return l((function(){var t=f.current,i=t.getContext("2d");t.width=200,t.height=200,t.style.width="200px",t.style.height="200px";var e=0;p.forEach((function(t){if(t.duration){var a=e,o=a+t.duration/m*Math.PI*2;t.name===c&&function(t,i,e,a,o,r){t.beginPath(),t.moveTo(i,e),t.arc(i,e,a-10,o,r),t.closePath();var n=t.createRadialGradient(i,e,5,i,e,a);n.addColorStop(0,"#41515d00"),n.addColorStop(.3,"#41515d00"),n.addColorStop(.6,"#41515d4d"),n.addColorStop(.9,"#41515db3"),t.fillStyle=n,t.fill()}(i,100,100,100,a,o),function(t,i,e,a,o,r,n,d){t.beginPath(),t.moveTo(i,e),t.arc(i,e,a,o+0,r-0),t.closePath();var l=t.createRadialGradient(i,e,5,i,e,a);l.addColorStop(0,"".concat(n,"00")),l.addColorStop(.89,"".concat(n,"00")),l.addColorStop(.9,n),l.addColorStop(1,n),t.fillStyle=l,t.fill(),d&&(h(t,100+95*Math.cos(o+0),100+95*Math.sin(o+0),5,0,2*Math.PI,n),h(t,100+95*Math.cos(r-0),100+95*Math.sin(r-0),5,0,2*Math.PI,n))}(i,100,100,100,a,o,t.color||"#000000"),e=o}}))})),e("div",{className:u.root,children:[a("div",{className:u.backgroundRoot,children:a("div",{className:u.dropShadowRoot})}),e("div",{className:u.content,children:[a(r,{className:u.activityTimeRange,children:"Last 24hrs"}),a("div",{className:u.lastActivityRoot,children:x&&x.duration?e(r,{className:u.activityDuration,children:[(x.duration/3600).toFixed(1)," ",a("span",{className:u.durationUnit,children:"h"})]}):null}),a(r,{className:u.activityName,children:i(c)})]}),a("div",{className:u.chart,children:a("canvas",{ref:f,className:u.canvas})})]})}p.propTypes={activities:c.arrayOf(c.shape({name:c.string,day:c.number,night:c.number})).isRequired,currentActivityName:c.string.isRequired};export default p;
