import t from"@babel/runtime/helpers/defineProperty";import{sumBy as e,upperFirst as i}from"lodash";import{jsxs as o,jsx as a,Fragment as r}from"react/jsx-runtime";import{makeStyles as n,Typography as d}from"@material-ui/core";import{useRef as l,useMemo as c,useEffect as s}from"react";import p from"prop-types";import h from"classnames";import{Regular14 as m}from"../Typography.js";var u=n({root:{width:"228px",height:"228px",borderRadius:"50%",border:"2px solid #3e3e3e",padding:"6px",position:"relative"},backgroundRoot:{width:"100%",height:"100%",borderRadius:"50%",border:"2px solid #5d666e",padding:"2px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},emptyStateBackground:{background:"radial-gradient(50% 50% at 50% 50%, rgba(100, 181, 246, 0) 54.4%, rgba(100, 181, 246, 0.01) 76.49%, rgba(100, 181, 246, 0.06) 100%)"},dropShadowRoot:{width:"100%",height:"100%",borderRadius:"50%",filter:"blur(36px)",border:"2px solid #64B5F6",display:"flex",alignItems:"center",justifyContent:"center"},content:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",left:0,top:0},lastActivityRoot:{width:"90px",height:"90px",background:"#3B3B3B",boxShadow:"0px 2px 2px rgba(0, 0, 0, 0.1), inset 0px 1px 1px rgba(255, 255, 255, 0.05)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"8px 0"},activityDuration:{fontSize:"24px"},durationUnit:{fontSize:"16px"},activityTimeRange:{fontSize:"10px",textTransform:"uppercase",color:"#9E9E9E",lineHeight:"24px",fontWeight:500},activityName:{fontSize:"12px",lineHeight:"14px",fontWeight:500},noOperationsRoot:{width:90,height:90},noOperationsText:{marginTop:24,color:"#9E9E9E"},chart:{position:"absolute",left:0,top:0,width:"100%",height:"100%",padding:"12px"},canvas:{width:"100%",height:"100%"}});function f(t,e,i,o,a,r,n){t.beginPath(),t.moveTo(e,i),t.arc(e,i,o,a,r),t.closePath(),t.fillStyle=n,t.fill()}function g(n){var p=n.currentActivityName,g=n.activities,x=u(),v=l(null),y=c((function(){return e(g,"duration")}),[g]),b=c((function(){return g.find((function(t){return t.name===p}))}),[g,p]);return s((function(){var t=v.current,e=t.getContext("2d");t.width=200,t.height=200,t.style.width="200px",t.style.height="200px";var i=0;g.forEach((function(t){if(t.duration){var o=i,a=o+t.duration/y*Math.PI*2;t.name===p&&function(t,e,i,o,a,r){t.beginPath(),t.moveTo(e,i),t.arc(e,i,o-10,a,r),t.closePath();var n=t.createRadialGradient(e,i,5,e,i,o);n.addColorStop(0,"#41515d00"),n.addColorStop(.3,"#41515d00"),n.addColorStop(.6,"#41515d4d"),n.addColorStop(.9,"#41515db3"),t.fillStyle=n,t.fill()}(e,100,100,100,o,a),function(t,e,i,o,a,r,n,d){t.beginPath(),t.moveTo(e,i),t.arc(e,i,o,a+0,r-0),t.closePath();var l=t.createRadialGradient(e,i,5,e,i,o);l.addColorStop(0,"".concat(n,"00")),l.addColorStop(.89,"".concat(n,"00")),l.addColorStop(.92,n),l.addColorStop(1,n),t.fillStyle=l,t.fill(),d&&(f(t,100+95*Math.cos(a+0),100+95*Math.sin(a+0),5,0,2*Math.PI,n),f(t,100+95*Math.cos(r-0),100+95*Math.sin(r-0),5,0,2*Math.PI,n))}(e,100,100,100,o,a,t.color||"#000000"),i=a}}))})),o("div",{className:x.root,children:[a("div",{className:h(x.backgroundRoot,t({},x.emptyStateBackground,!g.length)),children:a("div",{className:x.dropShadowRoot})}),o("div",{className:x.content,children:[a(d,{className:x.activityTimeRange,children:"Last 24hrs"}),g.length?o(r,{children:[a("div",{className:x.lastActivityRoot,children:b&&b.duration?o(d,{className:x.activityDuration,children:[(b.duration/3600).toFixed(1)," ",a("span",{className:x.durationUnit,children:"h"})]}):null}),a(d,{className:x.activityName,children:i(p)})]}):a("div",{className:x.noOperationsRoot,children:a(m,{className:x.noOperationsText,children:"No operations"})})]}),a("div",{className:x.chart,children:a("canvas",{ref:v,className:x.canvas})})]})}g.propTypes={activities:p.arrayOf(p.shape({name:p.string,day:p.number,night:p.number})).isRequired,currentActivityName:p.string.isRequired};export default g;
