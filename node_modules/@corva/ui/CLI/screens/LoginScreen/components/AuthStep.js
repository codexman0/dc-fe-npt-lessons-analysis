import o from"@babel/runtime/helpers/slicedToArray";import n from"@babel/runtime/regenerator";import r from"@babel/runtime/helpers/asyncToGenerator";import{jsxs as e,jsx as t}from"react/jsx-runtime";import{styled as i,Grid as m,Button as s}from"@material-ui/core";import{memo as a,useState as p}from"react";import c from"prop-types";import"../../../../components/Login/components/Login.js";import d from"../../../../components/Login/components/PasswordField.js";import l from"../../../../components/Login/components/Chip.js";import u from"../../../../components/Login/components/StepFooter.js";import f from"../../../../components/Login/components/StepContent.js";import g from"../../../../components/Login/components/StepHeader.js";import h from"../../../../components/Login/components/Step.js";import"../../../../components/Login/components/OrDivider.js";import v from"../../../../components/Login/components/HiddenEmailField.js";import"../../../../components/Login/components/EmailField.js";import{useAuth as L}from"../../../context/auth.js";import{NEED_HELP_EXTERNAL_LINK as b}from"../../../constants/index.js";var j=i(m)((function(o){var n=o.theme;return{marginTop:2*n.spacing(1),marginBottom:2*n.spacing(1),"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0}}})),y=i(s)((function(o){var n=o.theme;return{width:71,padding:n.spacing(),whiteSpace:"nowrap",backgroundColor:n.status.loginButton,"&:hover":{backgroundColor:"".concat(n.status.loginButtonHovered)}}}));function k(i){var s,a=i.email,c=i.schemas,k=i.onBack,w=i.onFinishLogin,C=L(),S=p(""),x=o(S,2),B=x[0],F=x[1],T=p(!1),q=o(T,2),H=q[0],R=q[1],E=H?C.error:null,I=(s=r(n.mark((function o(r){return n.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r.preventDefault(),R(!0),o.next=4,C.loginWithPassword(a,B,w);case 4:case"end":return o.stop()}}),o)}))),function(o){return s.apply(this,arguments)}),P=c.find((function(o){return"password"===o.provider}));return e(h,{children:[t(g,{children:"Sign In"}),t(f,{children:e(m,{container:!0,direction:"column",children:[t(l,{"data-not-migrated-MuiChip":!0,label:a,onClick:k}),P&&t(j,{item:!0,children:e("form",{id:"sign-in-form",onSubmit:I,children:[t(v,{email:a}),t(d,{value:B,onChange:function(o){F(o.target.value),R(!1)},disabled:C.loading,error:E})]})})]})}),t(u,{needHelpExternalLink:b,children:P&&t(y,{"data-testid":"".concat("AuthorizationPo","_signInButton"),form:"sign-in-form",type:"submit",variant:"contained",color:"primary",disabled:!B||C.loading||E,onClick:I,children:"Sign In"})})]})}k.propTypes={email:c.string.isRequired,schemas:c.arrayOf(c.shape()).isRequired,onBack:c.func.isRequired,onFinishLogin:c.func.isRequired};var w=a(k);export default w;
